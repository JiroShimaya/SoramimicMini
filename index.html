<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Soramimic</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script src="js/utils.js"></script>
<script src="js/kuromoji/build/kuromoji.js"></script>
</head>
<script>
var makeKanaDist, loadDB, GetYomi, separateKana, convertBar;
//グローバルに使う関数群の宣言
makeKanaDist = makeKanaDist_outer();
loadDB = loadDatabaseText;
GetYomi = MorphologicalAnalyzer();
separateKana = separateKana_outer();
convertBar = convertBar_outer();




setTimeout(function(){
	var text, paramter, wordlist;
	$.ajaxSetup({async: false});
	$.get("words/baseball.txt",function(data){
		text = data;
	});
	$.ajaxSetup({async: true});
	parameter = setDefaultParameters({"sameVowel":0.5});
	console.log(parameter);
	wordlist = loadDB(text);
	console.log(wordlist);
	getSimilarWord = getSimilarWord_outer(parameter);

	var yomi = "あいうえ";
	yomi = GetYomi(yomi);
	yomi = separateKana(yomi);
	var result = getSimilarWord(yomi,100);
	console.log(result);

},3000);


</script>
<body>
	<div class="container-fluid">
		<div class="row">
			<div class="col-xs-12 div-result">出力結果</div>
			<div class="col-xs-12"></div>
			<div class="form-group col-xs-12 radio-wordlist">
				<label class="" for=>単語リストの種類</label>
				<div>
					<label class="radio-inline"><input type="radio" name="wordfile" value="words/baseball.txt">野球選手</label>
					<label class="radio-inline"><input type="radio" name="wordfile" value="words/stations.txt">駅名</label>
					<label class="radio-inline"><input type="radio" name="wordfile" value="words/nations.txt" checked="checked">国名</label>
					<label class="radio-inline"><input type="radio" name="wordfile" value="words/sekitsui.txt">動物</label>
					<label class="radio-inline"><input type="radio" name="wordfile" value="words/pokemon.txt">ポケモン</label>
					<label class="radio-inline"><input type="radio" name="wordfile" value="words/physicist.txt">物理学者</label>
				</div>
			</div>

			<div class="col-xs-12">
				<input type = "text" class="form-control ipt-word" placeholder="変換をしたい単語">
				<button class="btn btn-block btn-primary btn-send">Convert</button>
			</div>
		</div>
	</div>
</body>
<script>
var wordlist, getSimilarWord;
wordlist = {}
$('.radio-wordlist').find("input[type=radio]").each(function(index, element){
	var path = $(element).val();
	wordlist[path] = loadDatabaseFile(path);
});
getSimilarWord = getSimilarWord_outer(setDefaultParamters());
$(".btn-send").click(function(){
	var text = $(".ipt-word").val();
	if(text == ""){
		return;
	}
	var wordfile = $("[name=wordfile]:checked").val();
	var param = setDefaultParamters();
	var result = getSimilarWord(wordlist,text,length=100);
	var resulttext = "";

	$(".div-result").html();


});
</script>
</html>